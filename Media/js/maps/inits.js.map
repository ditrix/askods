{"version":3,"sources":["init.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"inits.js","sourcesContent":["/*\r\n    init.js v2.0\r\n    Wezom wTPL v4.0.0\r\n*/\r\nwindow.wHTML = (function($){\r\n\r\n    /* Приватные переменные */\r\n\r\n        var varSeoIframe = 'seoIframe',\r\n            varSeoTxt = 'seoTxt',\r\n            varSeoClone = 'cloneSeo',\r\n            varSeoDelay = 200;\r\n\r\n    /* Приватные функции */\r\n\r\n        /* проверка типа данных на объект */\r\n        var _isObject = function(data) {\r\n            var flag = (typeof data == 'object') && (data+'' != 'null');\r\n            return flag;\r\n        },\r\n\r\n        /* создание нового элемента элемента */\r\n        _crtEl = function(tag, classes, attrs, jq) {\r\n            var tagName = tag || 'div';\r\n            var element = document.createElement(tagName);\r\n            var jQueryElement = jq || true;\r\n            // если классы объявлены - добавляем\r\n            if (classes) {\r\n                var tagClasses = classes.split(' ');\r\n                for (var i = 0; i < tagClasses.length; i++) {\r\n                    element.classList.add(tagClasses[i]);\r\n                }\r\n            }\r\n            // если атрибуты объявлены - добавляем\r\n            if (_isObject(attrs)) {\r\n                for (var key in attrs) {\r\n                    var val = attrs[key];\r\n                    element[key] = val;\r\n                }\r\n            }\r\n            // возвращаем созданый елемент\r\n            if (jQueryElement) {\r\n                return $(element);\r\n            } else {\r\n                return element;\r\n            }\r\n        },\r\n\r\n        /* создаем iframe для сео текста */\r\n        _seoBuild = function(wrapper) {\r\n            var seoTimer;\r\n            // создаем iframe, который будет следить за resize'm окна\r\n            var iframe = _crtEl('iframe', false, {id: varSeoIframe, name: varSeoIframe});\r\n            iframe.css({\r\n                'position':'absolute',\r\n                'left':'0',\r\n                'top':'0',\r\n                'width':'100%',\r\n                'height':'100%',\r\n                'z-index':'-1'\r\n            });\r\n            // добавляем его в родитель сео текста\r\n            wrapper.prepend(iframe);\r\n            // \"прослушка\" ресайза\r\n            seoIframe.onresize = function() {\r\n                clearTimeout(seoTimer);\r\n                seoTimer = setTimeout(function() {\r\n                    wHTML.seoSet();\r\n                }, varSeoDelay);\r\n            };\r\n            // вызываем seoSet()\r\n            wHTML.seoSet();\r\n        };\r\n\r\n    /* Публичные методы */\r\n\r\n        function Methods(){}\r\n\r\n        Methods.prototype = {\r\n\r\n            /* установка cео текста на странице */\r\n            seoSet: function() {\r\n                if ($('#'+varSeoTxt).length) {\r\n                    var seoText = $('#'+varSeoTxt);\r\n                    var iframe = seoText.children('#'+varSeoIframe);\r\n                    if (iframe.length) {\r\n                        // если iframe сущствует устанавливаем на место сео текст\r\n                        var seoClone = $('#'+varSeoClone);\r\n                        if (seoClone.length) {\r\n                            // клонеру задаем высоту\r\n                            seoClone.height(seoText.outerHeight(true));\r\n                            // тексту задаем позицию\r\n                            seoText.css({\r\n                                top: seoClone.offset().top\r\n                            });\r\n                        } else {\r\n                            // клонера нету - бьем в колокола !!!\r\n                            console.error('\"'+varSeoClone+'\" - не найден!');\r\n                        }\r\n                    } else {\r\n                        // если iframe отсутствует, создаем его и устанавливаем на место сео текст\r\n                        _seoBuild(seoText);\r\n                    }\r\n                }\r\n            },\r\n\r\n            /* magnificPopup inline */\r\n            mfi: function() {\r\n                $('.mfi').magnificPopup({\r\n                    type: 'inline',\r\n                    closeBtnInside: true,\r\n                    removalDelay: 300,\r\n                    mainClass: 'zoom-in'\r\n                });\r\n            },\r\n\r\n            /* magnificPopup ajax */\r\n            mfiAjax: function() {\r\n                $('body').magnificPopup({\r\n                    delegate: '.mfiA',\r\n                    callbacks: {\r\n                        elementParse: function(item) {\r\n                            this.st.ajax.settings = {\r\n                                url: item.el.data('url'),\r\n                                type: 'POST',\r\n                                data: (typeof item.el.data('param') !== 'undefined') ? item.el.data('param') : ''\r\n                            };\r\n                        },\r\n                        ajaxContentAdded: function(el) {\r\n                            wHTML.validation();\r\n                        }\r\n                    },\r\n                    type: 'ajax',\r\n                    removalDelay: 300,\r\n                    mainClass: 'zoom-in'\r\n                });\r\n            },\r\n\r\n            /* оборачивание iframe и video для адаптации */\r\n            wTxtIFRAME: function() {\r\n                var list = $('.wTxt').find('iframe').add($('.wTxt').find('video'));\r\n                if (list.length) {\r\n                    // в цикле для каждого\r\n                    for (var i = 0; i < list.length; i++) {\r\n                        var element = list[i];\r\n                        var jqElement = $(element);\r\n                        // если имеет класс ignoreHolder, пропускаем\r\n                        if (jqElement.hasClass('ignoreHolder')) {\r\n                            continue;\r\n                        }\r\n                        if (typeof jqElement.data('wraped') === 'undefined') {\r\n                            // определяем соотношение сторон\r\n                            var ratio = parseFloat((+element.offsetHeight / +element.offsetWidth * 100).toFixed(2));\r\n                            if (isNaN(ratio)) {\r\n                                // страховка 16:9\r\n                                ratio = 56.25;\r\n                            }\r\n                            // назнчаем дату и обрачиваем блоком\r\n                            jqElement.data('wraped', true).wrap('<div class=\"iframeHolder ratio_' + ratio.toFixed(0) + '\" style=\"padding-top:'+ratio+'%;\"\"></div>');\r\n                        }\r\n                    }\r\n                    // фиксим сео текст\r\n                    this.seoSet();\r\n                }\r\n            }\r\n        };\r\n\r\n    /* Объявление wHTML и базовые свойства */\r\n\r\n    var wHTML = $.extend(true, Methods.prototype, {});\r\n\r\n    return wHTML;\r\n\r\n})(jQuery);\r\n\r\n\r\n\r\n\r\njQuery(document).ready(function($) {\r\n\r\n    // поддержка cssanimations\r\n    transitFlag = Modernizr.cssanimations;\r\n\r\n    // очитска localStorage\r\n    localStorage.clear();\r\n\r\n    // сео текст\r\n    wHTML.seoSet();\r\n\r\n    // magnificPopup inline\r\n    wHTML.mfi();\r\n\r\n    // magnificPopup ajax\r\n    wHTML.mfiAjax();\r\n\r\n    // валидация форм\r\n    wHTML.validation();\r\n\r\n\r\n    $(window).load(function() {\r\n        // оборачивание iframe и video для адаптации\r\n        wHTML.wTxtIFRAME();\r\n\r\n        // wTabs        \r\n        function wTab(t) {  \r\n            t.parent().children('.curr').removeClass('curr');\r\n            t.addClass('curr');\r\n            $('.' + t.attr('data-tab-container')).children('.curr').removeClass('curr');\r\n            $('.' + t.attr('data-tab-container')).children('.' + t.attr('data-tab-link')).addClass('curr');\r\n        }\r\n        $('.wTab_nav').on('click', 'li', function(event) {\r\n            if ($(this).hasClass('curr')) {\r\n                return false;\r\n            } else {\r\n                wTab($(this));\r\n            }\r\n        });\r\n\r\n        /** ### Select2\r\n         Инициализация select2, если он существует\r\n         * @name WDOCS_FROM\r\n        */\r\n        if ($('.sbi').length) {\r\n            $('.sbi').select2({\r\n                minimumResultsForSearch: -1,\r\n                allowClear: true                \r\n            }).on(\"change\", function() {\r\n                $(this).closest('.wForm').data('validator').element(this);\r\n            });\r\n        }\r\n        //WDOCS_TO\r\n\r\n        /** ### wAccordeon\r\n         Инициализация wAccordeon, если он существует\r\n         * @name WDOCS_FROM\r\n        */\r\n        if($('.wAccordeon').length) {\r\n            $('.js-accordeon_btn').on('click', function(){\r\n                var item_top = $(this).next();\r\n                if (item_top.is(':visible')){\r\n                    item_top.stop().slideUp(400, function(){\r\n                        item_top.parent().removeClass('curr');\r\n                    });    \r\n                }\r\n                else {\r\n                    item_top.stop().slideDown(400, function() {\r\n                        item_top.parent()\r\n                            .addClass('curr')\r\n                            .siblings().removeClass('curr')\r\n                            .children('.wAccordeon__item__content').stop().slideUp(400);\r\n                    });\r\n                     \r\n                }\r\n            })            \r\n        }\r\n        //WDOCS_TO\r\n\r\n\r\n        /** ### Mmenu\r\n         Инициализация Mmenu\r\n         * @name WDOCS_FROM\r\n        */   \r\n        $(\"#js-menu\").mmenu({\r\n            \"offCanvas\": {\r\n              \"position\": \"right\"\r\n           },\r\n           \"extensions\": [\r\n              \"theme-dark\"\r\n           ],\r\n           counters: true,\r\n            dividers: {\r\n                add: true,\r\n                addTo: \"[id*='contacts-']\",\r\n                fixed: true\r\n            },\r\n            // searchfield: {\r\n            //  resultsPanel: true\r\n            // },\r\n            navbar: {\r\n                title: \"Меню\"\r\n            },\r\n            navbars: {\r\n                height: 2,        \r\n                position: 'bottom',\r\n                content:  [ \r\n                    '<div class=\"wFooter__social\">'+\r\n                    '<ul>'+\r\n                    '<li><a href=\"#\"><span class=\"svgHolder\">'+\r\n                    '<svg>'+\r\n                    '<use xlink:href=\"#icon_soc_fb\"></use>'+\r\n                    '</svg></span></a></li>'+\r\n                    '<li><a href=\"#\"><span class=\"svgHolder\">'+\r\n                    '<svg>'+\r\n                    '<use xlink:href=\"#icon_soc_tw\"></use>'+\r\n                    '</svg></span></a></li>'+\r\n                    '<li><a href=\"#\"><span class=\"svgHolder\">'+\r\n                    '<svg>'+\r\n                    '<use xlink:href=\"#icon_soc_vk\"></use>'+\r\n                    '</svg></span></a></li>'+\r\n                    '<li><a href=\"#\"><span class=\"svgHolder\">'+\r\n                    '<svg>'+\r\n                    '<use xlink:href=\"#icon_soc_yt\"></use>'+\r\n                    '</svg></span></a></li>'+\r\n                    '<li><a href=\"#\"><span class=\"svgHolder\">'+\r\n                    '<svg>'+\r\n                    '<use xlink:href=\"#icon_soc_ig\"></use>'+\r\n                    '</svg></span></a></li>'+\r\n                    '</ul>'+\r\n                    '</div>'           \r\n                ]\r\n            }\r\n        }); \r\n        //WDOCS_TO\r\n\r\n\r\n        //scroll_top\r\n        var top_show = 100;\r\n        // var delay = 1000;\r\n\r\n        $(window).scroll(function() {\r\n            if ($(this).scrollTop() > top_show) {\r\n                $('.wHeader__bottom').addClass('p_fixed')();\r\n            }\r\n            else $('.wHeader__bottom').removeClass('p_fixed');\r\n        });\r\n\r\n        /** ### inView\r\n         Инициализация inView, если он существует\r\n         * @name WDOCS_FROM\r\n        */\r\n        if ($('.inviewI').length) {\r\n            $(\".inviewI\").on(\"inview\", function(event, isInView, visiblePartX, visiblePartY) {\r\n              var el = $(this);\r\n              el.addClass('inviewRun');\r\n            });\r\n        }\r\n        //WDOCS_TO\r\n\r\n\r\n        \r\n        /** ### js-wTop_slider\r\n         Инициализация слайдера carouselFred (js-wTop_slider), если он существует\r\n         * @name WDOCS_FROM\r\n        */\r\n        if ($('.js-wTop_slider').length) {\r\n\r\n            //var imgSelector = '.js-wTop_slider__item__img--back';\r\n            var animClass = 'no_scale';\r\n\r\n            $('.js-wTop_slider').carouFredSel({\r\n                items: {},\r\n                width: '100%',\r\n                responsive: true,\r\n                auto: {\r\n                    play: false,\r\n                    timeoutDuration: 5000\r\n                },\r\n                swipe: {\r\n                    onTouch: true\r\n                },\r\n                onCreate: function(data) {\r\n                    data.items.addClass(animClass);\r\n                    ///$('.js-wTop_slider__item__img--back').addClass('no_scale');                        \r\n                },\r\n                scroll: {\r\n                    items: 1,\r\n                    fx: \"crossfade\",                   \r\n                    duration: 1200,\r\n                    pauseOnHover: true,\r\n                    onBefore: function(data) {\r\n                        data.items.visible.addClass(animClass);\r\n                    }\r\n                },\r\n            }, {\r\n                transition: transitFlag\r\n\r\n            });\r\n\r\n            \r\n            $(\".wTop_slider__bottom--right\").find('li').on('click', function(){\r\n\r\n                $(\".wTop_slider__bottom--right li\").removeClass('active');\r\n                $(this).addClass('active');\r\n                var _index = $(this).data('index');\r\n                // console.log(_index);\r\n\r\n                $('.js-wTop_slider').trigger(\"slideTo\", _index);          \r\n            });\r\n        }\r\n        //WDOCS_TO\r\n\r\n        //map_label\r\n        $svgMap = $('#svgMap');\r\n        if ($svgMap) {\r\n            $svgMap.on('click', '.selector', function(event) {\r\n                event.preventDefault();\r\n                console.log(event);\r\n            });\r\n        }\r\n\r\n\r\n\r\n    });\r\n\r\n});\r\n"],"sourceRoot":"/source/"}